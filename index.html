<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Avalia√ß√£o Oficial CNH ‚Äî Teste R√°pido</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap');

body {
    margin:0;
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(to bottom, #f3f5f7, #e0e5ec);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px 0;
}

.quiz-container {
    width: 95%;
    max-width: 720px;
    background:#fff;
    border-radius:15px;
    box-shadow:0 15px 40px rgba(0,0,0,0.2);
    overflow:hidden;
    position: relative;
    font-family: 'Poppins', sans-serif;
}

.header {
    background: linear-gradient(90deg,#002b7f,#0041c2);
    color:#fff;
    padding:20px 30px;
    text-align:center;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

.header h1 { margin:0; font-size:1.8rem; }
.header p { margin:5px 0 0 0; font-size:1rem; opacity:0.9; }

/* Estilos do Quiz */
.progress-container {
    width:100%;
    height:10px;
    background:#ddd;
    border-radius:5px;
    overflow:hidden;
    margin-top:10px;
}

.progress-bar {
    height:10px;
    width:0%;
    background: linear-gradient(90deg,#ffcb05,#002b7f);
    transition: width 0.4s ease;
}

.question-count { font-size:0.85rem; color:#555; margin:10px 0; text-align:right; padding-right:15px; }

.question { text-align:center; margin:20px; }
.question-emoji { font-size:4rem; display:block; margin-bottom:10px; }
.question-title { font-size:1.6rem; font-weight:700; color:#002b7f; }
.question-subtitle { font-size:0.9rem; color:#555; margin-top:5px; }

.options { display:grid; grid-template-columns:1fr 1fr; gap:15px; margin:20px; }

.option-card {
    background: linear-gradient(145deg,#ffffff,#e0e5ec);
    border-radius:15px;
    padding:18px;
    text-align:center;
    font-size:1rem;
    cursor:pointer;
    transition: all 0.3s ease;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    user-select:none;
}

.option-card:hover { transform:scale(1.05); box-shadow:0 8px 25px rgba(0,0,0,0.2); }
.option-card.selected { animation: shine 0.5s forwards; }
.option-card.correct { background:#4caf50; color:#fff; box-shadow:0 0 15px 3px gold; }
.option-card.wrong { background:#f44336; color:#fff; box-shadow:0 0 15px 3px red; }

@keyframes shine {
    0% { box-shadow: 0 0 0px gold; transform:scale(1); }
    50% { box-shadow: 0 0 20px gold; transform:scale(1.05); }
    100% { box-shadow: 0 0 5px gold; transform:scale(1); }
}

#nextBtn {
    margin:15px 20px 25px 20px;
    background:#002b7f;
    color:#fff;
    border:none;
    padding:15px;
    border-radius:12px;
    cursor:pointer;
    font-size:1.1rem;
    width:calc(100% - 40px);
    transition: all 0.3s ease;
}

#nextBtn:hover { background:#001f5f; }

.footer { font-size:0.8rem; color:#555; text-align:center; margin-bottom:15px; }

/* --- TELA DE IN√çCIO (PRIMEIRA TELA) --- */
.start-screen {
    padding: 40px 20px;
    text-align: center;
    background: #f8faff; /* Fundo mais claro */
    color: #002b7f;
}
.start-screen h2 {
    font-size: 2.2rem;
    font-weight: 900;
    margin-bottom: 10px;
}
.start-screen p {
    font-size: 1rem;
    color: #555;
    margin-bottom: 25px;
    line-height: 1.4;
}

.start-buttons {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 30px;
}

.start-btn-choice {
    background: #e0e5ec;
    color: #002b7f;
    border: 2px solid transparent;
    padding: 15px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.1rem;
    width: 100%;
    transition: all 0.3s ease;
    font-weight: 700;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}
.start-btn-choice:hover {
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}
.start-btn-choice.selected {
    border: 2px solid #ff9800;
    background: #fff3e0;
    transform: scale(1.02);
}

#mainStartBtn {
    background: linear-gradient(90deg,#4CAF50,#2e7d32);
    color: #fff;
    border: none;
    padding: 18px 30px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.3rem;
    width: 100%;
    transition: all 0.3s ease;
    font-weight: 700;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    pointer-events: none; /* Desabilitado inicialmente */
    opacity: 0.6;
}
#mainStartBtn.active {
    pointer-events: auto;
    opacity: 1;
}
#mainStartBtn:hover {
    transform: scale(1.02);
    background: linear-gradient(90deg,#2e7d32,#4CAF50);
}


/* --- TELA DE TRANSI√á√ÉO (AP√ìS QUIZ / VALIDA√á√ÉO) --- */
.transition-container {
    padding: 50px 20px;
    text-align: center;
    background: #f0f7ff;
    position: relative;
}

/* Confetes (Mantidos) */
.confetti {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: 5;
}

.confetti-piece {
    position: absolute;
    width: 10px;
    height: 20px;
    background: #ffcc00;
    opacity: 0;
    animation: fall 3s infinite;
    z-index: 10;
}

@keyframes fall {
    0% { transform: translate(0, -100px) rotate(0deg); opacity: 1; }
    100% { transform: translate(100px, 100vh) rotate(720deg); opacity: 0; }
}

.transition-container h2 {
    font-size: 2.2rem;
    color: #4CAF50;
    margin-bottom: 25px;
    font-weight: 900;
}

.loading-bar {
    width: 80%;
    margin: 30px auto 40px auto;
    height: 15px;
    background: #e0e0e0;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

#loading-progress {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #002b7f, #0041c2);
    border-radius: 10px;
    transition: width 3s ease-in-out;
}

#validation-message {
    font-size: 1.1rem;
    color: #002b7f;
    margin-bottom: 30px;
    font-weight: 700;
    min-height: 25px;
}

.category-selection h3 {
    font-size: 1.4rem;
    color: #002b7f;
    margin-bottom: 25px;
    font-weight: 700;
}

.category-options {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 40px;
}

.category-btn {
    background: linear-gradient(90deg,#ffcb05,#ff9800);
    color: #002b7f;
    border: none;
    padding: 15px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.1rem;
    width: 100%;
    transition: all 0.3s ease;
    font-weight: 700;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.category-btn:hover {
    transform: scale(1.02);
    background: linear-gradient(90deg,#ff9800,#ffcb05);
}
.category-btn.selected {
    border: 3px solid #4CAF50;
    transform: scale(1.05);
    box-shadow: 0 0 15px #4CAF50;
}


/* --- ESTILOS PADR√ÉO E DE TRANSI√á√ÉO --- */

.quiz-content { transition: opacity 0.5s; }
.hidden { display: none !important; }

/* TELA 1 - RESULTADO E FORMUL√ÅRIO */
.result-container {
    padding: 30px 20px;
    text-align: center;
}
.result-container h2 { font-size: 2rem; color: #4CAF50; margin-bottom: 10px; font-weight: 900; }
.result-container .score-display { font-size: 1.2rem; color: #002b7f; margin-bottom: 20px; font-weight: 700; }
.result-container .score-display strong { font-size: 1.8rem; color: #ffcb05; }
.result-message { font-size: 1rem; color: #333; margin-bottom: 25px; line-height: 1.4; background: #e9f5e9; padding: 15px; border-radius: 10px; border-left: 5px solid #4CAF50; }
.form-title { font-size: 1.3rem; color: #002b7f; margin-top: 30px; margin-bottom: 15px; font-weight: 700; }
.form-group { margin-bottom: 15px; }
.form-group input, .form-group select { width: calc(100% - 20px); padding: 12px 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; box-sizing: border-box; transition: border-color 0.3s; }
.form-group input:focus, .form-group select:focus { border-color: #002b7f; outline: none; box-shadow: 0 0 5px rgba(0, 43, 127, 0.3); }
#submitBtn { background: linear-gradient(90deg,#4CAF50,#2e7d32); color: #fff; border: none; padding: 15px; border-radius: 12px; cursor: pointer; font-size: 1.2rem; width: 100%; margin-top: 20px; margin-bottom: 10px; transition: background 0.3s ease; font-weight: 700; }
#submitBtn:hover { background: linear-gradient(90deg,#2e7d32,#1b5e20); }

/* --- TELA 2 - CONFIRMA√á√ÉO DE PAGAMENTO (PREMIUM) --- */

.payment-container {
    padding: 40px;
    text-align: center;
    background: #fcfcfc;
}

.payment-container h2 {
    font-size: 2.2rem;
    color: #002b7f;
    margin-bottom: 10px;
    font-weight: 900;
    line-height: 1.2;
}

.success-message-2 {
    font-size: 1.1rem;
    color: #4CAF50;
    margin-bottom: 30px;
    font-weight: 700;
    border-bottom: 2px solid #eee;
    padding-bottom: 15px;
}

/* Cron√¥metro de Urg√™ncia */
.timer-box {
    background: #ff4500;
    color: #fff;
    padding: 15px 25px;
    border-radius: 15px;
    margin: 30px 0;
    font-size: 1.2rem;
    font-weight: 600;
    box-shadow: 0 8px 15px rgba(255, 69, 0, 0.4);
    border: 2px solid #ffcb05;
}

#countdown {
    font-size: 3.5rem;
    font-weight: 900;
    display: block;
    margin: 5px 0 10px 0;
    color: #ffcb05;
    letter-spacing: 2px;
}

/* Justificativa da Taxa */
.justification {
    text-align: left;
    margin: 35px 0;
    padding: 25px;
    background: #f8faff;
    border-radius: 15px;
    border: 1px solid #e0e7ff;
}

.justification h3 {
    font-size: 1.6rem;
    color: #002b7f;
    margin-top: 0;
    border-bottom: 3px solid #ffcb05;
    padding-bottom: 10px;
    font-weight: 700;
    text-align: center;
}

.justification strong {
    color: #ff4500;
    font-weight: 700;
}

.cost-breakdown {
    list-style: none;
    padding: 0;
    margin: 20px 0;
}

.cost-breakdown li {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px dashed #ddd;
    font-size: 1rem;
    color: #333;
}

.cost-breakdown li:last-child {
    border-bottom: none;
    font-weight: 700;
    color: #002b7f;
    font-size: 1.1rem;
}

.cost-breakdown li span:first-child { font-weight: 600; }

#payBtn {
    background: linear-gradient(90deg,#ffcb05,#ff9800);
    color: #002b7f;
    border: none;
    padding: 22px;
    border-radius: 15px;
    cursor: pointer;
    font-size: 1.5rem;
    width: 100%;
    transition: all 0.4s ease;
    font-weight: 900;
    text-transform: uppercase;
    box-shadow: 0 10px 20px rgba(255, 152, 0, 0.4);
    letter-spacing: 1px;
    transform: scale(1.02);
}

#payBtn:hover {
    background: linear-gradient(90deg,#ff9800,#ffcb05);
    transform: scale(1.05);
}
.small-print { font-size: 0.85rem; color: #888; margin-top: 20px; }
</style>
</head>
<body>

<div class="quiz-container">

    <div id="start-screen" class="start-screen">
        <h2 style="color: #002b7f;">Avalia√ß√£o Oficial de Aptid√£o CNH</h2>
        <p>
            O passo a seguir √© uma Prova de Aptid√£o que combina os exames (Te√≥rico + Psicot√©cnico) obrigat√≥rios para voc√™ ser aprovado(a) e receber sua CNH 100% gratuita. Se voc√™ atingir a pontua√ß√£o m√≠nima nesta prova, garante sua vaga na CNH Gratuita (ou na renova√ß√£o).
        </p>

        <h3 style="font-size: 1.4rem; color: #ff9800; margin-bottom: 15px; font-weight: 700;">Selecione o Tipo de Habilita√ß√£o:</h3>

        <div class="start-buttons">
            <button class="start-btn-choice" data-type="Habilitacao">
                üöó Primeira Habilita√ß√£o CNH Social (A, B ou AB)
            </button>
            <button class="start-btn-choice" data-type="Renovacao">
                üîÑ Renova√ß√£o/Mudan√ßa de Categoria CNH Social
            </button>
        </div>

        <button id="mainStartBtn">Iniciar Prova de Aptid√£o</button>

        <div class="footer" style="margin-top: 20px;">
            Pontua√ß√£o m√≠nima necess√°ria: 23/31
        </div>
    </div>


    <div id="quiz-content" class="quiz-content hidden">
        <div class="header">
            <h1>Avalia√ß√£o Oficial de Aptid√£o CNH</h1>
            <p>Avalia√ß√£o de Aptid√£o Te√≥rica e Psicot√©cnica | Programa CNH Social</p>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>
        <div class="question-count" id="question-count">1/31</div>

        <div class="question">
            <span class="question-emoji" id="question-emoji">üö¶</span>
            <div class="question-title" id="question-title">Pergunta Principal</div>
            <div class="question-subtitle">Todas as perguntas s√£o orientativas e seguem o conte√∫do do exame te√≥rico e psicot√©cnico.</div>
        </div>

        <div class="options" id="options"></div>

        <button id="nextBtn">Pr√≥xima Pergunta</button>

        <div class="footer">
            Pontua√ß√£o m√≠nima para aptid√£o: 23/31
        </div>
    </div>

    <div id="transition-screen" class="transition-container hidden">
        <div class="confetti" id="confetti-container"></div>

        <div id="loading-phase">
            <h2 style="color: #002b7f;">An√°lise de Aptid√£o Final</h2>
            <p id="validation-message" style="font-size: 1.1rem; color: #002b7f; font-weight: 700; margin-bottom: 30px;">
                Estamos Validando Sua Pontua√ß√£o e Elegibilidade...
            </p>

            <div class="loading-bar">
                <div id="loading-progress"></div>
            </div>
            <div class="footer" style="margin-top:40px;">
                Aguarde. Processamento de dados via sistema oficial.
            </div>
        </div>

        <div id="choice-phase" class="hidden">
             <h2 style="color: #4CAF50; font-size: 2.5rem;">üéâ APROVA√á√ÉO E VAGA GARANTIDA!</h2>
             <p style="font-size: 1.1rem; color: #333; margin-bottom: 30px;">
                 Parab√©ns! Pr√≥xima Etapa: Defina a categoria para a emiss√£o da sua Carteira Nacional de Habilita√ß√£o Social - *100% gratuita.*
             </p>

             <div class="category-selection">
                 <h3>Selecione a Categoria da sua CNH Gratuita:</h3>
                 <div class="category-options">
                     <button class="category-btn" data-category="A">üõµ Categoria A (Moto) - Vaga Gratuita</button>
                     <button class="category-btn" data-category="B">üöó Categoria B (Carro) - Vaga Gratuita</button>
                     <button class="category-btn" data-category="AB">üèçÔ∏è Categoria A e B (Moto e Carro) - Vaga Gratuita</button>
                 </div>
                 <p style="font-size: 0.9rem; color: #ff4500; font-weight: 600;">*Apenas uma categoria pode ser selecionada.</p>
             </div>
        </div>
    </div>

    <div id="result-screen" class="result-container hidden">
        <h2>‚úÖ Parab√©ns! Voc√™ foi Aprovado(a)!</h2>

        <div class="score-display">
            Voc√™ atingiu a qualifica√ß√£o com <strong id="final-score">X de 31</strong> acertos.
        </div>

        <p class="result-message">
            Voc√™ demonstrou preparo no exame te√≥rico e psicot√©cnico, atingindo a pontua√ß√£o m√≠nima para ser considerado(a) *qualificado(a)* ao programa CNH Social.
        </p>
        <div id="selected-cnh-display" style="font-size: 1.2rem; color: #ff9800; font-weight: 900; margin-bottom: 20px;">
             Sua escolha: <span id="cnh-chosen"></span>
        </div>

        <p class="form-title">
            Passo 2: Pr√©-cadastro Oficial para Reserva da Vaga
        </p>

        <form id="pre-cadastro-form">
            <div class="form-group">
                <input type="text" id="nome" placeholder="Seu Nome Completo" required="">
            </div>
            <div class="form-group">
                <input type="tel" id="whatsapp" placeholder="WhatsApp (DDD + N√∫mero)" required="">
            </div>
            <div class="form-group">
                <select id="estado" required="">
                    <option value="">Selecione Seu Estado (UF)</option>
                    <option value="AC">Acre</option>
                    <option value="AL">Alagoas</option>
                    <option value="AP">Amap√°</option>
                    <option value="AM">Amazonas</option>
                    <option value="BA">Bahia</option>
                    <option value="CE">Cear√°</option>
                    <option value="DF">Distrito Federal</option>
                    <option value="ES">Esp√≠rito Santo</option>
                    <option value="GO">Goi√°s</option>
                    <option value="MA">Maranh√£o</option>
                    <option value="MT">Mato Grosso</option>
                    <option value="MS">Mato Grosso do Sul</option>
                    <option value="MG">Minas Gerais</option>
                    <option value="PA">Par√°</option>
                    <option value="PB">Para√≠ba</option>
                    <option value="PR">Paran√°</option>
                    <option value="PE">Pernambuco</option>
                    <option value="PI">Piau√≠</option>
                    <option value="RJ">Rio de Janeiro</option>
                    <option value="RN">Rio Grande do Norte</option>
                    <option value="RS">Rio Grande do Sul</option>
                    <option value="RO">Rond√¥nia</option>
                    <option value="RR">Roraima</option>
                    <option value="SC">Santa Catarina</option>
                    <option value="SP">S√£o Paulo</option>
                    <option value="SE">Sergipe</option>
                    <option value="TO">Tocantins</option>
                </select>
            </div>
            <button type="submit" id="submitBtn">Garantir Minha CNH Gratuita Agora</button>
        </form>
        <div class="footer" style="margin-top:20px;">
            A CNH Social √© um programa do Governo Federal/Estadual.
        </div>
    </div>

    <div id="payment-screen" class="payment-container hidden">
        <h2>Voc√™ est√° Quase L√°! Sua CNH Gratuita est√° Confirmada! ü•≥</h2>
        <p class="success-message-2">
            Parab√©ns pela sua *aprova√ß√£o priorit√°ria* no Teste de Aptid√£o. Seu resultado garante sua qualifica√ß√£o no programa CNH Social.
        </p>

        <div class="timer-box">
            üö® *ALERTA DE VAGA √öNICA!* Sua reserva expira em:
            <span id="countdown">10:00</span>
            <p style="font-size: 0.9rem; margin: 5px 0 0 0; font-weight: 400; color: #fff;">(Ap√≥s o tempo, a vaga √© liberada para o pr√≥ximo candidato qualificado na fila.)</p>
        </div>

        <div class="justification">
            <h3>Por Que a Taxa √önica de R$ 29,90 √© Necess√°ria?</h3>

            <p>Como aprovado(a), sua CNH (que custaria mais de R$ 2.000) √© **100% gratuita*. O valor de *R$ 29,90* √© uma *Taxa de Processamento e Emiss√£o de Documentos** obrigat√≥ria para a valida√ß√£o final da sua vaga, conforme as diretrizes operacionais do programa.</p>

            <ul class="cost-breakdown">
                <li><span>Custo da CNH Completa:</span> <span>R$ 2.000+</span></li>
                <li><span>Seu Desconto CNH Social:</span> <span style="color: #ff4500;">- R$ 2.000+</span></li>
                <li><span>Taxa de Processamento (Valida√ß√£o e Emiss√£o de Certificado):</span> <span>R$ 29,90</span></li>
                <li style="border-top: 1px solid #ddd;"><span>Seu Custo Total Final:</span> <span>R$ 29,90</span></li>
            </ul>

            <p>Ao pagar a taxa agora, voc√™ garante o **processamento imediato de prioridade* e a *reserva da sua vaga** antes que o tempo se esgote e ela seja transferida. **Esta √© a √öNICA CHANCE de confirmar sua participa√ß√£o.</p>
        </div>

        <button id="payBtn">Confirmar o Pr√©-cadastro e Pagar Taxa √önica de R$ 29,90</button>

        <p class="small-print">Seu pagamento √© processado pela plataforma de checkout seguro e garante a reserva da sua vaga no sistema do Governo.</p>
    </div>

</div>

<audio id="click-sound" src="https://freesound.org/data/previews/170/170932_2437358-lq.mp3"></audio>

<script>
// Array de perguntas do quiz
const questions = [
    {emoji:"üö¶", titulo:"O que significa uma luz vermelha no sem√°foro?", opcoes:["‚õî Parar","‚ö†Ô∏è Aten√ß√£o","üü¢ Seguir","üöó Reduzir velocidade"], correta:0},
    {emoji:"üõ£Ô∏è", titulo:"Voc√™ est√° em uma via de m√£o √∫nica. Qual regra deve seguir?", opcoes:["‚Ü©Ô∏è Pode fazer retorno","‚û°Ô∏è Apenas seguir a m√£o da via","‚ÜîÔ∏è Pode mudar sentido","üõë Parar sempre"], correta:1},
    {emoji:"üß†", titulo:"Se A > B e B > C, ent√£o A > C?", opcoes:["‚úÖ Sim","‚ùå N√£o","‚ö†Ô∏è Depende","ü§î N√£o sei"], correta:0},
    {emoji:"üèéÔ∏è", titulo:"Dist√¢ncia m√≠nima segura entre ve√≠culos em estrada seca?", opcoes:["üöó 2 segundos","üöï 1 segundo","üöô 3 segundos","üõë 0,5 segundo"], correta:0},
    {emoji:"üöó", titulo:"Sinal correto ao ultrapassar outro ve√≠culo?", opcoes:["‚ÜóÔ∏è Seta direita","‚ÜñÔ∏è Seta esquerda","‚ö†Ô∏è Farol alto","üí® Nenhum"], correta:0},
    {emoji:"üõë", titulo:"O que significa uma placa de 'Pare'?", opcoes:["‚õî Parar obrigatoriamente","‚ö†Ô∏è Aten√ß√£o e seguir","üü¢ Pode prosseguir","üöó Apenas reduzir velocidade"], correta:0},
    {emoji:"üöß", titulo:"√Årea com sinal de obras. Como deve dirigir?", opcoes:["üöó Velocidade normal","‚ö†Ô∏è Reduzir e aten√ß√£o","üí® Acelerar","üõë Parar totalmente"], correta:1},
    {emoji:"üö∏", titulo:"Pr√≥ximo a uma escola, sinal indica?", opcoes:["üë∂ Aten√ß√£o a crian√ßas","üöó Parar o carro","üèÉ Corrida livre","‚ö†Ô∏è Apenas reduzir velocidade"], correta:0},
    {emoji:"üß†", titulo:"Teste de aten√ß√£o: qual figura √© diferente das demais?", opcoes:["üü¢ Quadrado","üü¶ Quadrado","üü• Quadrado","üî∫ Tri√¢ngulo"], correta:3},
    {emoji:"‚ö†Ô∏è", titulo:"Voc√™ v√™ uma placa de 'Curva Perigosa √† Direita'. Qual atitude?", opcoes:["‚û°Ô∏è Reduzir velocidade","üí® Manter velocidade","‚Ü©Ô∏è Retroceder","üöó Ultrapassar"], correta:0},
    {emoji:"üß©", titulo:"Teste de mem√≥ria: qual padr√£o segue ap√≥s üîµüî¥üîµ?", opcoes:["üî¥üîµüî¥","üîµüî¥üîµ","üü¢üü¢üî¥","üî¥üî¥üîµ"], correta:0},
    {emoji:"üö¶", titulo:"Sem√°foro com luz amarela. O que fazer?", opcoes:["‚ö†Ô∏è Reduzir e parar se necess√°rio","‚õî Parar sempre","üü¢ Acelerar","üöó Ignorar"], correta:0},
    {emoji:"üõë", titulo:"Parada obrigat√≥ria: o que √© permitido?", opcoes:["üöó Prosseguir somente se seguro","üí® Acelerar","‚Ü©Ô∏è Fazer retorno direto","‚ö†Ô∏è Reduzir apenas"], correta:0},
    {emoji:"üèéÔ∏è", titulo:"Voc√™ deseja ultrapassar em via de pista dupla. Condi√ß√£o correta?", opcoes:["‚ÜóÔ∏è Seta e verificar seguran√ßa","üí® Acelerar sem olhar","üõë Esperar sem sinal","‚Ü©Ô∏è Retornar primeiro"], correta:0},
    {emoji:"üß†", titulo:"Se uma sequ√™ncia l√≥gica √© 2,4,6,8, qual pr√≥ximo n√∫mero?", opcoes:["10","12","9","11"], correta:0},
    {emoji:"üöó", titulo:"Qual √© a velocidade m√°xima em √°rea urbana padr√£o?", opcoes:["50 km/h","30 km/h","70 km/h","60 km/h"], correta:0},
    {emoji:"üõ£Ô∏è", titulo:"Como identificar via de m√£o dupla?", opcoes:["Sinaliza√ß√£o e faixa central","Sem sinal √© sempre m√£o √∫nica","Placas somente","N√£o √© poss√≠vel identificar"], correta:0},
    {emoji:"üß©", titulo:"Qual figura completa a sequ√™ncia üî∫‚¨õ‚¨õüî∫‚¨õ?", opcoes:["‚¨õ","üî∫","‚¨ú","üîµ"], correta:0},
    {emoji:"üöß", titulo:"Em pista em obras, linha cont√≠nua branca significa?", opcoes:["N√£o ultrapassar","Pode ultrapassar","Parar","Reduzir velocidade"], correta:0},
    {emoji:"üö∏", titulo:"Pedestres atravessando fora da faixa. Como agir?", opcoes:["‚ö†Ô∏è Reduzir e parar se necess√°rio","üí® Acelerar","‚Ü©Ô∏è Dar r√©","üõë Ignorar"], correta:0},
    {emoji:"üß†", titulo:"Qual das imagens n√£o pertence ao grupo?", opcoes:["üöó, üöï, üõµ, üè†","üö¶, üõë, ‚ö†Ô∏è, üü¢","üõ£Ô∏è, üõ§Ô∏è, üõë, üöó","üî∫, üîµ, üî¥, üî∫"], correta:0},
    {emoji:"üèéÔ∏è", titulo:"Ultrapassagem proibida em:", opcoes:["Curva sem visibilidade","Retas longas","Pistas largas","Pista dupla"], correta:0},
    {emoji:"üö¶", titulo:"Sem√°foro piscando em amarelo significa:", opcoes:["‚ö†Ô∏è Aten√ß√£o redobrada","‚õî Parar","üü¢ Seguir normal","üí® Acelerar"], correta:0},
    {emoji:"üß†", titulo:"Se Jo√£o √© mais alto que Pedro, e Pedro mais alto que Ana, quem √© o mais baixo?", opcoes:["Ana","Pedro","Jo√£o","N√£o √© poss√≠vel"], correta:0},
    {emoji:"üöó", titulo:"O que fazer ao estacionar em rua inclinada com freio de m√£o?", opcoes:["Rodar rodas para cal√ßada","Deixar rodas soltas","Nada","Acelerar e parar"], correta:0},
    {emoji:"üöß", titulo:"Faixa amarela cont√≠nua indica:", opcoes:["Proibido ultrapassar","Pode ultrapassar","Apenas reduzir","Parar sempre"], correta:0},
    {emoji:"üõë", titulo:"Placa 'D√™ a prefer√™ncia'. O que significa?", opcoes:["üöó Parar se houver tr√¢nsito","üí® Acelerar","‚Ü©Ô∏è Retornar","‚ö†Ô∏è Continuar sempre"], correta:0},
    {emoji:"üß©", titulo:"Qual item completa a sequ√™ncia: ‚ñ≤, ‚ñº, ‚ñ≤, ‚ñº, ?", opcoes:["‚ñ≤","‚ñº","‚ñ†","‚óã"], correta:0},
    {emoji:"üö¶", titulo:"O que fazer se o sem√°foro estiver apagado?", opcoes:["‚ö†Ô∏è Seguir como parada obrigat√≥ria","üí® Acelerar","‚Ü©Ô∏è Retornar","üöó Ignorar"], correta:0},
    {emoji:"üõ£Ô∏è", titulo:"Em estrada com neblina, qual atitude?", opcoes:["‚ö†Ô∏è Reduzir velocidade e usar farol baixo","üí® Acelerar","üöó Ligar farol alto","üõë Parar totalmente"], correta:0},
    {emoji:"üèéÔ∏è", titulo:"Ultrapassagem permitida apenas √† esquerda em pistas de m√£o dupla?", opcoes:["‚úÖ Sim","‚ùå N√£o","‚ö†Ô∏è Depende do ve√≠culo","ü§î N√£o sei"], correta:0}
];

let currentQuestion = 0;
const totalQuestions = questions.length;
let score = 0;
const MIN_SCORE = 23;
let cnhCategory = ''; // Vari√°vel para a Categoria escolhida (A, B, AB)
let quizType = ''; // Vari√°vel para o Tipo de CNH escolhido (Habilitacao ou Renovacao)

// Elementos Principais
const startScreen = document.getElementById('start-screen'); // NOVO
const quizContent = document.getElementById('quiz-content');

// Elementos do Start Screen
const startChoiceButtons = document.querySelectorAll('.start-btn-choice');
const mainStartBtn = document.getElementById('mainStartBtn');

// Elementos do Quiz
const progressBar = document.getElementById('progress-bar');
const optionsContainer = document.getElementById('options');
const nextBtn = document.getElementById('nextBtn');
const clickSound = document.getElementById('click-sound');


// Elementos da Tela de Transi√ß√£o (P√ìS-QUIZ)
const transitionScreen = document.getElementById('transition-screen');
const loadingPhase = document.getElementById('loading-phase');
const loadingProgress = document.getElementById('loading-progress');
const validationMessage = document.getElementById('validation-message');
const choicePhase = document.getElementById('choice-phase');
const confettiContainer = document.getElementById('confetti-container');
const categoryButtons = document.querySelectorAll('.category-btn');

// Elementos das Telas P√≥s-Quiz
const resultScreen = document.getElementById('result-screen');
const preCadastroForm = document.getElementById('pre-cadastro-form');
const paymentScreen = document.getElementById('payment-screen');
const payBtn = document.getElementById('payBtn');
const countdownElement = document.getElementById('countdown');

const PAYMENT_LINK = "https://compraseguraonline.org.ua/c/caf6413b55"; // LINK DE PAGAMENTO DEFINIDO AQUI

let timerInterval;

// L√≥gica para a sele√ß√£o do Tipo de Habilita√ß√£o (Start Screen)
startChoiceButtons.forEach(button => {
    button.addEventListener('click', (e) => {
        startChoiceButtons.forEach(btn => btn.classList.remove('selected'));
        e.target.classList.add('selected');
        quizType = e.target.getAttribute('data-type');
        mainStartBtn.classList.add('active'); // Habilita o bot√£o principal
    });
});

// Fun√ß√£o para iniciar o Quiz (Chamada pelo bot√£o principal)
function startQuiz() {
    if (!quizType) {
        alert("Por favor, selecione o Tipo de Habilita√ß√£o para iniciar.");
        return;
    }

    startScreen.classList.add('hidden');
    quizContent.classList.remove('hidden');
    showQuestion(currentQuestion);
}

// Evento para iniciar o Quiz
mainStartBtn.addEventListener('click', startQuiz);


// Fun√ß√£o para iniciar a anima√ß√£o de Confetes
function startConfetti() {
    confettiContainer.innerHTML = '';
    const colors = ['#ffcc00', '#002b7f', '#4CAF50', '#ff4500'];
    const numPieces = 50;

    for (let i = 0; i < numPieces; i++) {
        const piece = document.createElement('div');
        piece.classList.add('confetti-piece');
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        piece.style.left = `${Math.random() * 100}%`;
        piece.style.animationDelay = `${Math.random() * 2}s`;
        piece.style.animationDuration = `${(Math.random() * 1.5) + 1.5}s`;
        piece.style.transform = `rotate(${Math.random() * 360}deg)`;
        confettiContainer.appendChild(piece);
    }
}


function showQuestion(index){
    const q = questions[index];
    document.getElementById('question-emoji').textContent = q.emoji;
    document.getElementById('question-title').textContent = q.titulo;
    document.getElementById('question-count').textContent = `${index+1}/${totalQuestions}`;
    optionsContainer.innerHTML = '';

    q.opcoes.forEach((opt,i)=>{
        const card = document.createElement('div');
        card.classList.add('option-card');
        card.textContent = opt;

        card.addEventListener('click', ()=>{
            if(optionsContainer.classList.contains('answered')) return;
            clickSound.currentTime=0;
            clickSound.play();

            if(i === q.correta){
                card.classList.add('correct');
                score++;
            } else {
                card.classList.add('wrong');
            }

            document.querySelectorAll('.option-card').forEach(c=>c.style.pointerEvents='none');
            optionsContainer.classList.add('answered');
        });

        optionsContainer.appendChild(card);
    });

    progressBar.style.width = `${((index + 1) / totalQuestions) * 100}%`;
    optionsContainer.classList.remove('answered');
}

// Fun√ß√£o para mostrar a tela de Escolha da CNH ap√≥s o carregamento
function showChoiceScreen() {
    loadingPhase.classList.add('hidden');
    choicePhase.classList.remove('hidden');

    // Ajusta o texto da tela de escolha com base na sele√ß√£o inicial
    const title = document.querySelector('#choice-phase h2');
    const subtitle = document.querySelector('#choice-phase p');
    const categoryTitle = document.querySelector('.category-selection h3');

    if (score >= MIN_SCORE) {
          startConfetti(); // Inicia os confetes ao mostrar a tela de sucesso/escolha

          if (quizType === 'Renovacao') {
            title.textContent = 'üéâ RENOVA√á√ÉO/MUDAN√áA DE CATEGORIA GARANTIDA!';
            subtitle.innerHTML = 'Parab√©ns! Pr√≥xima Etapa: Confirme o tipo de CNH para o prosseguimento da sua **Renova√ß√£o/Mudan√ßa de Categoria Social - *100% gratuita.***';
            categoryTitle.textContent = 'Selecione a Categoria de sua CNH:';
            // Renova os bot√µes de categoria se necess√°rio
            document.querySelector('.category-options').innerHTML = `
                <button class="category-btn" data-category="A">üõµ Categoria A (Moto) - Vaga Gratuita</button>
                <button class="category-btn" data-category="B">üöó Categoria B (Carro) - Vaga Gratuita</button>
                <button class="category-btn" data-category="AB">üèçÔ∏è Categoria A e B (Moto e Carro) - Vaga Gratuita</button>
            `;
            // Re-adiciona os eventos aos novos bot√µes de categoria
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', handleCategorySelection);
            });
          } else {
            // Habilitacao (Primeira)
            title.textContent = 'üéâ APROVA√á√ÉO E VAGA GARANTIDA!';
            subtitle.innerHTML = 'Parab√©ns! Pr√≥xima Etapa: Defina a categoria para a emiss√£o da sua Carteira Nacional de Habilita√ß√£o Social - *100% gratuita.*';
            categoryTitle.textContent = 'Selecione a Categoria da sua CNH Gratuita:';
          }

    } else {
          // L√≥gica para reprova√ß√£o
          title.textContent = '‚ö†Ô∏è Seu Perfil foi Analisado!';
          title.style.color = '#ff4500';
          subtitle.innerHTML = 'Infelizmente, sua pontua√ß√£o **n√£o atingiu a aptid√£o m√≠nima** para a CNH gratuita.';
          categoryTitle.classList.add('hidden');

          // Substitui os bot√µes de escolha por um bot√£o de "Ver Resultado"
          document.querySelector('.category-options').innerHTML = '<button id="view-final-result" class="category-btn" style="background: #002b7f; color: #fff;">Ver Resultado Final Completo</button>';
          document.getElementById('view-final-result').addEventListener('click', showResultScreen);
    }
}

// Fun√ß√£o para a Tela de Transi√ß√£o (com carregamento de 3s)
function showTransitionScreen() {
    quizContent.classList.add('hidden');
    transitionScreen.classList.remove('hidden');

    loadingPhase.classList.remove('hidden');
    choicePhase.classList.add('hidden');
    confettiContainer.innerHTML = '';

    // Garante que o progresso inicia em 0
    loadingProgress.style.transition = 'width 0s';
    loadingProgress.style.width = '0%';
    setTimeout(() => {
        loadingProgress.style.transition = 'width 3s ease-in-out';
    }, 50);

    validationMessage.textContent = 'Estamos Validando Sua Pontua√ß√£o e Elegibilidade...';

    // Inicia o carregamento (anima√ß√£o CSS)
    setTimeout(() => {
        loadingProgress.style.width = '100%';
    }, 100);

    // Tempo para simular a valida√ß√£o (3 segundos)
    setTimeout(() => {
        showChoiceScreen();
    }, 3000);
}


function showResultScreen(){
    // Esconde a transi√ß√£o e mostra a tela de pr√©-cadastro (TELA 1)
    transitionScreen.classList.add('hidden');
    resultScreen.classList.remove('hidden');

    document.getElementById('final-score').textContent = `${score} de ${totalQuestions}`;

    const cnhDisplay = document.getElementById('cnh-chosen');
    const displayContainer = document.getElementById('selected-cnh-display');

    if (cnhCategory) {
          cnhDisplay.textContent = `${quizType === 'Renovacao' ? 'Renova√ß√£o Categoria' : 'CNH Categoria'} ${cnhCategory}`;
          displayContainer.classList.remove('hidden');
    } else {
          // Se n√£o escolheu (porque reprovou), esconde a escolha da CNH
          displayContainer.classList.add('hidden');
    }

    // Ajusta o texto para a Renova√ß√£o
    if (score >= MIN_SCORE && quizType === 'Renovacao') {
        document.querySelector('.result-container h2').textContent = '‚úÖ Parab√©ns! Sua Renova√ß√£o/Mudan√ßa de Categoria est√° Confirmada!';
        document.querySelector('.result-message').innerHTML = 'Voc√™ demonstrou preparo no exame e garantiu sua **Renova√ß√£o/Mudan√ßa de Categoria Social**, sendo considerado(a) *qualificado(a)* ao programa CNH Social.';
        document.getElementById('submitBtn').textContent = 'Garantir Minha Renova√ß√£o/Mudan√ßa Gratuita Agora';
    } else if (score < MIN_SCORE) {
        document.querySelector('.result-container h2').textContent = '‚ö†Ô∏è Voc√™ n√£o atingiu a pontua√ß√£o m√≠nima';
        document.querySelector('.result-container h2').style.color = '#f44336';
        document.querySelector('.result-message').innerHTML = `Sua pontua√ß√£o foi de **${score} acertos**. A pontua√ß√£o m√≠nima √© **${MIN_SCORE}**. Infelizmente, voc√™ n√£o est√° apto(a) para a CNH Social neste momento.`;
        document.getElementById('submitBtn').style.background = '#9e9e9e';
        document.getElementById('submitBtn').style.pointerEvents = 'none';
        document.getElementById('submitBtn').textContent = 'Inscri√ß√£o N√£o Liberada';
    }
}

function startPaymentTimer(){
    // Inicia o cron√¥metro para a TELA 2 (10 minutos)
    let timeInSeconds = 600;

    function updateCountdown() {
        const minutes = Math.floor(timeInSeconds / 60);
        const seconds = timeInSeconds % 60;

        countdownElement.textContent =
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

        if (timeInSeconds <= 0) {
            clearInterval(timerInterval);
            countdownElement.textContent = "00:00";
            payBtn.textContent = "TEMPO ESGOTADO. VAGA PERDIDA.";
            payBtn.disabled = true;
            payBtn.style.background = '#9e9e9e';
            payBtn.style.boxShadow = 'none';
        } else {
            timeInSeconds--;
        }
    }

    // Zera qualquer timer anterior e inicia um novo
    if (timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(updateCountdown, 1000);
    updateCountdown();
}

nextBtn.addEventListener('click', ()=>{
    if(optionsContainer.classList.contains('answered')){
        if(currentQuestion < totalQuestions - 1){
            currentQuestion++;
            showQuestion(currentQuestion);
        } else {
            // Ao final do quiz, chama a nova tela de transi√ß√£o (Valida√ß√£o de 3 segundos)
            showTransitionScreen();
        }
    } else {
        alert("Por favor, selecione uma op√ß√£o antes de prosseguir.");
    }
});

function handleCategorySelection(e) {
    categoryButtons.forEach(btn => btn.classList.remove('selected'));
    e.target.classList.add('selected');
    cnhCategory = e.target.getAttribute('data-category');

    // Adiciona um bot√£o para prosseguir ap√≥s a escolha
    let proceedBtn = document.getElementById('proceed-to-form');
    if (!proceedBtn) {
        proceedBtn = document.createElement('button');
        proceedBtn.id = 'proceed-to-form';
        proceedBtn.textContent = 'Confirmar Categoria e Ir para o Pr√©-cadastro';
        proceedBtn.classList.add('category-btn');
        proceedBtn.style.marginTop = '20px';
        proceedBtn.style.background = 'linear-gradient(90deg, #4CAF50, #2e7d32)';
        proceedBtn.style.color = '#fff';
        proceedBtn.style.fontWeight = '700';
        proceedBtn.addEventListener('click', showResultScreen);
        document.getElementById('choice-phase').querySelector('.category-selection').appendChild(proceedBtn); // Adiciona ao final da se√ß√£o de sele√ß√£o
    }
}
// L√≥gica para a escolha da CNH (Re-adiciona eventos para garantir)
categoryButtons.forEach(button => {
    button.addEventListener('click', handleCategorySelection);
});


// Evento para o formul√°rio de pr√©-cadastro (TELA 1)
preCadastroForm.addEventListener('submit', (e) => {
    e.preventDefault();

    // Simples valida√ß√£o de que a categoria foi escolhida (apenas para aprovados)
    if (score >= MIN_SCORE && !cnhCategory) {
        alert("Por favor, selecione a Categoria da sua CNH.");
        return;
    }

    // Se aprovado, mostra a tela de pagamento (TELA 2)
    if (score >= MIN_SCORE) {
        resultScreen.classList.add('hidden');
        paymentScreen.classList.remove('hidden');
        startPaymentTimer();
    }
});

// Evento para o bot√£o de pagamento (TELA 2)
payBtn.addEventListener('click', () => {
    // Redireciona para o link de pagamento
    if (PAYMENT_LINK) {
        window.location.href = PAYMENT_LINK;
    } else {
        alert("Link de pagamento n√£o configurado.");
    }
});
</script>

</body>
</html>
